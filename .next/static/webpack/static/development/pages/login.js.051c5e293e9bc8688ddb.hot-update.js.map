{"version":3,"file":"static/webpack/static/development/pages/login.js.051c5e293e9bc8688ddb.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import Layout from '../components/SiteLayout.js'\nimport React, { Component, PropTypes } from 'react';\nimport http from '../utils/http'\nimport Link from 'next/link';\nclass CreatePage extends Component {\n    componentWillMount() {\n        this.setState({ username: '', password: '', error: '' });\n    }\n\n    async login() {\n        if (this.state.username == '') {\n            this.setState({ error: 'Username is mandatory'})\n        } else if (this.state.password == '') {\n            this.setState({ error: 'Password is mandatory'})\n        }\n        else {\n            this.setState({ error: ''})\n            const j = await http.postJson(`/api/login/`, this.state);\n            if (j.token!=null) {\n                document.cookie = \"x-tasklist-token=\" + j.token\n                document.location = \"/\";\n            } else {\n                this.setState({ error: 'Wrong credentials' })\n            }\n        }\n    }\n    render() {\n        return <Layout>\n            <h2>Create account</h2>\n            <div>Username</div><input type=\"text\" id=\"username\" value={this.state.username}\n                                  onChange={(event) => {\n                                      this.setState({ username: event.target.value, error: '' });\n                                  }} />\n\n            <div>Password</div><input type=\"password\" id=\"password\" value={this.state.password}\n                                         onChange={(event) => this.setState({ password: event.target.value, error: '' })} />\n            { this.state.error && <div className=\"error\">{this.state.error}<br/></div> }\n            <div><button onClick={() => this.login()}>Login</button></div>\n\n            <div><Link as=\"/account\" href=\"/account\"><a>Create a new account?</a></Link></div>\n            <style jsx>\n                {`\n          .error {\n              color: red;\n          }\n            `}</style>\n        </Layout>\n    }\n}\n\nexport default CreatePage;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;AAGA;;;;;AACA;AAAA;AAAA;;;;;AACA;;;;;AACA;AAAA;AAAA;;;;;AAGA;AAAA;AAAA;;AACA;AACA;;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAZA;AAAA;AAAA;AAoBA;;;;AA3CA;AACA;AA6CA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}