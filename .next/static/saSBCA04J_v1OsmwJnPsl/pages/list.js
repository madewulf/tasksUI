(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{238:function(t,e,n){__NEXT_REGISTER_PAGE("/list",function(){return t.exports=n(251),{page:t.exports.default}})},251:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),s=n(5),o=n.n(s),i=n(0),c=n.n(i),u=n(14);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function f(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,m(e).apply(this,arguments))}var n,a,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,i["Component"]),n=e,(a=[{key:"render",value:function(){var t=this,e=this.props.innerComponent;return this.props.show?c.a.createElement("div",{id:"myModal",className:"jsx-1380754024 modal"},c.a.createElement("div",{className:"jsx-1380754024 modal-content"},c.a.createElement("div",{className:"jsx-1380754024 modal-close"},c.a.createElement("span",{onClick:function(){return t.props.onClose()},className:"jsx-1380754024 close"},"Ã—"),c.a.createElement("h4",{className:"jsx-1380754024 modal-title"},this.props.title)),c.a.createElement("div",{className:"jsx-1380754024 modal-inner-content"},e)),c.a.createElement(o.a,{styleId:"1380754024",css:[".modal.jsx-1380754024{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0,0,0);background-color:rgba(0,0,0,0.4);}",".modal-content.jsx-1380754024{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;border-radius:3px;width:80%;}",".modal-close.jsx-1380754024{margin-top:-18px;}",".close.jsx-1380754024{color:#aaa;float:right;font-size:28px;font-weight:bold;}",".close.jsx-1380754024:hover,.close.jsx-1380754024:focus{color:black;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}",".modal-title.jsx-1380754024{padding:10px 0;margin-bottom:0;color:#444;}"]})):null}}])&&p(n.prototype,a),r&&p(n,r),e}(),y=n(3);function k(t){var e=["orange","red","pink","purple","blue","lightblue","lightgreen","green"],n={};return t.map(function(t,a){n[t.key]=e[a%e.length]}),n}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e,n,a,r,s,o){try{var i=t[s](o),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function v(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function g(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=g(this,j(e).call(this,t))).state={name:"",list:n.props.list,task:n.props.task},n}var n,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,i["Component"]),n=e,(a=[{key:"onNamePicked",value:function(){var t,e=(t=r.a.mark(function t(e){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return t.next=3,y.a.postJson("/api/u/",{name:e});case 3:return n=t.sent,t.next=6,y.a.putJson("/api/l/".concat(this.state.list.url_key,"/"),{users:[n.key]});case 6:a=t.sent,this.setState({list:a,name:""}),this.props.onNewList(a);case 9:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function o(t){b(s,a,r,o,i,"next",t)}function i(t){b(s,a,r,o,i,"throw",t)}o(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=k(this.state.list.members),n=this.state.task.assigned_to.map(function(t){return t.key});return c.a.createElement("div",{className:"jsx-1366877219"},this.state.list.members.filter(function(t){return!n.includes(t.key)}).map(function(n){return c.a.createElement("div",{key:n.key,className:"jsx-1366877219 userButton"},c.a.createElement("div",{onClick:function(){return t.props.onUserPicked(n.key)},key:""+n.key,className:"jsx-1366877219 "+("userName butt "+e[n.key]||"")},c.a.createElement("span",{className:"jsx-1366877219"},n.name)))}),c.a.createElement("h4",{className:"jsx-1366877219"},"Add a person:"),c.a.createElement("div",{className:"jsx-1366877219"}),c.a.createElement("input",{type:"text",id:"name-form-input",value:this.state?this.state.name:"",onChange:function(e){t.setState({name:e.target.value})},onKeyUp:function(e){e&&"Enter"==e.key&&t.onNamePicked(t.state.name)},className:"jsx-1366877219"}),c.a.createElement("button",{onClick:function(){return t.onNamePicked(t.state.name)},className:"jsx-1366877219 okButton"},"OK"),c.a.createElement(o.a,{styleId:"1366877219",css:[".okButton.jsx-1366877219{margin-left:10px;height:37px;}"]}))}}])&&v(n.prototype,a),s&&v(n,s),e}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e,n,a,r,s,o){try{var i=t[s](o),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function _(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function S(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=S(this,C(e).call(this,t))).state={list:n.props.list,name:n.props.list.name,description:n.props.list.description},n}var n,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,i["Component"]),n=e,(a=[{key:"onFeatureChanged",value:function(){var t,e=(t=r.a.mark(function t(e,n){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("onFeatureChanged",e,n),!e){t.next=9;break}return(a={})[e]=n,t.next=6,y.a.putJson("/api/l/".concat(this.state.list.url_key,"/"),a);case 6:s=t.sent,this.setState({list:s}),this.props.onNewList(s);case 9:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function o(t){O(s,a,r,o,i,"next",t)}function i(t){O(s,a,r,o,i,"throw",t)}o(void 0)})});return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"jsx-4021989194"},c.a.createElement("div",{className:"jsx-4021989194 list-field"},"Name"),c.a.createElement("input",{type:"text",id:"name-form-input",value:this.state?this.state.name:"",onChange:function(e){t.setState({name:e.target.value})},onBlur:function(){t.onFeatureChanged("name",t.state.name)},className:"jsx-4021989194"}),c.a.createElement("div",{className:"jsx-4021989194 list-field"},"Description"),c.a.createElement("input",{type:"text",id:"name-form-input",value:this.state?this.state.description:"",onChange:function(e){t.setState({description:e.target.value})},onBlur:function(){t.onFeatureChanged("description",t.state.description)},className:"jsx-4021989194"}),c.a.createElement("div",{className:"jsx-4021989194 list-field"},"Assignation"),c.a.createElement("div",{className:"jsx-4021989194"},c.a.createElement("input",{id:"assignation-checkbox",checked:!this.state.list.assignationsOn,type:"checkbox",onChange:function(e){t.onFeatureChanged("assignationsOn",!e.target.checked)},className:"jsx-4021989194"})," ",c.a.createElement("span",{htmlFor:"assignation-checkbox",className:"jsx-4021989194"},"Hide ",c.a.createElement("em",{className:"jsx-4021989194"},"Assign")," button")),c.a.createElement("div",{className:"jsx-4021989194 list-field"},"Delete a task"),c.a.createElement("div",{className:"jsx-4021989194"},c.a.createElement("em",{className:"jsx-4021989194"},"To delete one task, just tap on it and delete its text.")),c.a.createElement(o.a,{styleId:"4021989194",css:[".okButton.jsx-4021989194{margin-left:10px;height:37px;}",".list-field.jsx-4021989194{font-size:1.5em;padding:0;}"]}))}}])&&_(n.prototype,a),s&&_(n,s),e}(),J=n(30);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e,n,a,r,s,o){try{var i=t[s](o),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function B(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var s=t.apply(e,n);function o(t){A(s,a,r,o,i,"next",t)}function i(t){A(s,a,r,o,i,"throw",t)}o(void 0)})}}function U(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function L(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=L(this,I(e).call(this,t))).state={taskText:"",list:JSON.parse(JSON.stringify(t.list)),showModal:!1,modal:"nameForm",editingTask:!1,listenerAdded:!1},n}var n,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,i["Component"]),n=e,a=[{key:"onTaskUnassign",value:function(){var t=B(r.a.mark(function t(e,n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.putJson("/api/t/".concat(e,"/"),{users:["-"+n]});case 2:return t.next=4,y.a.getJson("/api/l/".concat(this.state.list.url_key,"/"));case 4:a=t.sent,this.setState({showModal:!1,list:a});case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"onTaskAssign",value:function(){var t=B(r.a.mark(function t(e){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({modal:"nameForm",clickedTask:e,showModal:!0});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onEditList",value:function(){var t=B(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({modal:"editForm",showModal:!0});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"onUserPick",value:function(){var t=B(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.putJson("/api/t/".concat(this.state.clickedTask.key,"/"),{users:[e]});case 2:return t.next=4,y.a.getJson("/api/l/".concat(this.state.list.url_key,"/"));case 4:n=t.sent,this.setState({showModal:!1,list:n});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"createTask",value:function(){var t=B(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.state.taskText.trim()){t.next=8;break}return t.next=3,y.a.postJson("/api/t/",{text:this.state.taskText,list:this.props.list.url_key});case 3:return t.sent,t.next=6,y.a.getJson("/api/l/".concat(this.state.list.url_key,"/"));case 6:e=t.sent,this.setState({list:e,taskText:""});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"taskClick",value:function(){var t=B(r.a.mark(function t(e,n){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.checked?"done":"waiting",n.status=a,this.setState({list:this.state.list}),t.next=5,y.a.putJson("/api/t/"+e.id+"/",{status:a});case 5:return t.next=7,y.a.getJson("/api/l/".concat(this.state.list.url_key,"/"));case 7:s=t.sent,this.setState({list:s,editingTask:!0});case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"taskEdit",value:function(t){var e=JSON.parse(JSON.stringify(this.state.list));e.tasks.map(function(e){e.key==t?e.edit=!0:e.edit=!1}),this.setState({list:e,editingTask:!1})}},{key:"taskChange",value:function(){var t=B(r.a.mark(function t(e,n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.putJson("/api/t/"+e+"/",{text:n});case 2:return t.next=4,y.a.getJson("/api/l/".concat(this.state.list.url_key,"/"));case 4:a=t.sent,this.setState({list:a});case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"handleVisibilityChange",value:function(){var t=B(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(document.hidden){t.next=5;break}return t.next=3,y.a.getJson("/api/l/".concat(this.state.list.url_key,"/"));case 3:e=t.sent,this.setState({list:e});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;this.state.listenerAdded||"undefined"!=typeof window&&(document.addEventListener("visibilitychange",function(){return t.handleVisibilityChange()},!1),window.addEventListener("focus",function(){return t.handleVisibilityChange()},!1),this.state.listenerAdded=!0);var e,n,a=this.props,r=this.state.list,s=k(r.members);return"nameForm"===this.state.modal?(e=c.a.createElement(E,{list:r,colorClassPerUser:s,onUserPicked:function(e){return t.onUserPick(e)},task:this.state.clickedTask,onNewList:function(e){t.setState({list:e})}}),n="Tap on a name"):(e=c.a.createElement(P,{list:r,onNewList:function(e){t.setState({list:e})}}),n="Edit the list"),c.a.createElement(u.a,{meta:a.list},c.a.createElement("div",{onClick:function(){return t.onEditList()},className:"jsx-2811390923 list-edit-icon"},c.a.createElement("i",{className:"jsx-2811390923 far fa-edit fa-xs"})),c.a.createElement("h1",{className:"jsx-2811390923"},this.state.list.name," "),c.a.createElement("p",{className:"jsx-2811390923"},this.state.list.description),c.a.createElement("div",{className:"jsx-2811390923"},r.tasks.map(function(e){var n="taskText "+("done"===e.status?"strike":"");return c.a.createElement("div",{key:e.key,className:"jsx-2811390923 listItem"},c.a.createElement("input",{type:"checkbox",id:e.key,onChange:function(n){t.taskClick(n.target,e)},checked:"done"===e.status,className:"jsx-2811390923"}),!e.edit&&c.a.createElement("span",{onClick:function(){t.taskEdit(e.key)},className:"jsx-2811390923 "+(n||"")},e.text),e.edit&&c.a.createElement("span",{className:"jsx-2811390923"}," ",c.a.createElement("input",{type:"text",autoFocus:!0,defaultValue:e.text,onBlur:function(n){t.taskChange(e.key,n.target.value)},onKeyUp:function(n){n&&"Enter"==n.key&&t.taskChange(e.key,event.target.value)},className:"jsx-2811390923"})," "),t.state.list.assignationsOn&&e.assigned_to.map(function(n){return c.a.createElement("span",{onClick:function(){return t.onTaskUnassign(e.key,n.key)},key:""+n.key+e.key,className:"jsx-2811390923 "+("userName "+s[n.key]||"")},c.a.createElement("span",{className:"jsx-2811390923"},n.name))}),t.state.list.assignationsOn&&0===e.assigned_to.length&&c.a.createElement("span",{onClick:function(){return t.onTaskAssign(e)},className:"jsx-2811390923 assignButton"},"Assign"),t.state.list.assignationsOn&&0!==e.assigned_to.length&&c.a.createElement("span",{onClick:function(){return t.onTaskAssign(e)},className:"jsx-2811390923 assignButton"},c.a.createElement("i",{className:"jsx-2811390923 fas fa-plus"})))})),c.a.createElement("div",{className:"jsx-2811390923"},c.a.createElement("input",{type:"text",id:"taskText",autoFocus:!this.state.editingTask,value:this.state.taskText,onChange:function(e){t.setState({taskText:e.target.value})},placeholder:"New task here ...",onKeyUp:function(e){e&&"Enter"==e.key&&t.createTask()},className:"jsx-2811390923"}),c.a.createElement("br",{className:"jsx-2811390923"}),c.a.createElement("button",{onClick:function(){return t.createTask()},className:"jsx-2811390923"},"Add")),c.a.createElement(h,{title:n,show:this.state.showModal,onClose:function(){return t.setState({showModal:!1})},innerComponent:e}),c.a.createElement(o.a,{styleId:"2811390923",css:[".taskText.jsx-2811390923{padding:5px;}",".assignButton.jsx-2811390923{color:#1E90FF;padding:4px;background:#eee;border-radius:3px;cursor:pointer;}",".listItem.jsx-2811390923{padding:5px;margin:1px;}",".itemText.jsx-2811390923{padding:3 5;}",".strike.jsx-2811390923{-webkit-text-decoration:line-through;text-decoration:line-through;}",".container.jsx-2811390923{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".container.jsx-2811390923 input.jsx-2811390923{position:absolute;opacity:0;cursor:pointer;height:0;width:0;}",".checkmark.jsx-2811390923{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:3px;background-color:#eee;}",".container.jsx-2811390923:hover input.jsx-2811390923~.checkmark.jsx-2811390923{background-color:#ccc;}",".container.jsx-2811390923 input.jsx-2811390923:checked~.checkmark.jsx-2811390923{background-color:#2196F3;}",'.checkmark.jsx-2811390923:after{content:"";position:absolute;display:none;}',".container.jsx-2811390923 input.jsx-2811390923:checked~.checkmark.jsx-2811390923:after{display:block;}",".container.jsx-2811390923 .checkmark.jsx-2811390923:after{left:9px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}",".nameLabel.jsx-2811390923{display:inline;font-weight:100;}",".list-edit-icon.jsx-2811390923{font-size:2em;float:right;padding-left:10px;}",".fa-edit.jsx-2811390923{color:#ddd;cursor:pointer;}"]}))}}],s=[{key:"getInitialProps",value:function(){var t=B(r.a.mark(function t(e){var n,a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query.title,a=Object(J.b)(e),t.next=4,y.a.getJson("/api/l/".concat(n,"/"),a);case 4:return s=t.sent,t.abrupt("return",{list:s});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],a&&U(n.prototype,a),s&&U(n,s),e}();e.default=z}},[[238,1,0]]]);